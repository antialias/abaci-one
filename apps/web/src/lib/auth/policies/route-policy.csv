# Role hierarchy
g, user, guest
g, admin, user

# Guest-accessible (public endpoints)
p, guest, /api/health, *
p, guest, /api/heartbeat, *
p, guest, /api/build-info, *
p, guest, /api/auth/*, *
p, guest, /api/blog/*, GET
p, guest, /api/images/*, GET
p, guest, /api/observe/*, GET
p, guest, /api/flowcharts/browse, GET
p, guest, /api/flowcharts/suggest, GET
p, guest, /api/flowcharts/seeds, GET
p, guest, /api/flowcharts/pdf, *
p, guest, /api/flowcharts/:id, GET
p, guest, /api/flowcharts/:id/related, GET
p, guest, /api/flowcharts/:id/worksheet, GET
p, guest, /api/viewer, GET
p, guest, /api/smoke-test-status, GET
p, guest, /api/smoke-test-results, GET
p, guest, /api/metrics, GET
p, guest, /api/coverage-results, GET
p, guest, /api/worksheets/share/*, GET
p, guest, /api/worksheets/preview, *
p, guest, /api/worksheets/download/*, GET
p, guest, /api/download/*, GET
p, guest, /api/audio/clips/*, GET
p, guest, /api/audio/collected-clips, GET
p, guest, /api/audio/collected-clips/manifest, GET
p, guest, /api/create/*, *
p, guest, /api/feature-flags, GET

# Guest-accessible practice & app routes
p, guest, /api/players/*, *
p, guest, /api/family/*, *
p, guest, /api/curriculum/*, *
p, guest, /api/game-results/*, *
p, guest, /api/player-stats/*, *
p, guest, /api/settings/*, *
p, guest, /api/worksheets/*, *
p, guest, /api/sessions/*, *
p, guest, /api/enrollment-requests/*, *
p, guest, /api/entry-prompts/*, *
p, guest, /api/flowcharts/*, *
p, guest, /api/flowchart-workshop/*, *
p, guest, /api/abacus-settings, *
p, guest, /api/scanner-settings, *
p, guest, /api/arcade/*, *
p, guest, /api/arcade-session, *
p, guest, /api/realtime/*, *
p, guest, /api/euclid/*, *
p, guest, /api/audio/*, *
p, guest, /api/generate, *
p, guest, /api/user-stats, *
p, guest, /api/vision/*, *
p, guest, /api/remote-camera, *
p, guest, /api/demo/*, *
p, guest, /api/gameplay/*, *

# Guest classroom access (student-side participation only)
# Guests can view a classroom and participate, but cannot create or manage classrooms
p, guest, /api/classrooms/:id, GET
p, guest, /api/classrooms/:id/*, *
p, guest, /api/classrooms/code/:code, GET
p, guest, /api/classroom/*, *

# Authenticated user routes â€” classroom creation/management & teacher features
# (user inherits all guest permissions via role hierarchy)
p, user, /api/classrooms, *
p, user, /api/classrooms/*, *
p, user, /api/teacher-flowcharts/*, *
p, user, /api/mcp, *

# Admin-only routes
p, admin, /api/admin/*, *
p, admin, /api/debug/*, *
p, admin, /api/vision-training/*, *
p, admin, /api/dev/*, *
